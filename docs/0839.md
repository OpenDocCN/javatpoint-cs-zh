# 虚拟内存

> 原文：<https://www.javatpoint.com/os-virtual-memory>

虚拟内存是一种存储方案，它给用户一种拥有非常大的主内存的错觉。这是通过将辅助存储器的一部分作为主存储器来实现的。

在该方案中，用户可以通过幻想内存可用于加载进程来加载比可用主内存更大的进程。

操作系统不是在主内存中加载一个大进程，而是在主内存中加载多个进程的不同部分。

通过这样做，多道程序设计的程度将会提高，因此，CPU 利用率也会提高。

## 虚拟内存是如何工作的？

用现代的话来说，虚拟记忆现在已经变得相当普遍了。在该方案中，每当一些页面需要被加载到主存储器中用于执行并且存储器对于那些页面不可用时，那么在这种情况下，操作系统不是停止页面进入主存储器，而是搜索最近最少使用或者没有被引用的随机存取存储器区域，并将该区域复制到辅助存储器中，以在主存储器中为新页面腾出空间。

因为所有这些过程都是自动发生的，所以它让计算机感觉它有无限的内存。

## 请求页面调度

按需分页是一种流行的虚拟内存管理方法。在请求分页中，进程中使用最少的页面被存储在辅助存储器中。

当发出请求或发生页面错误时，页面被复制到主存储器。有各种页面替换算法，用于确定将要被替换的页面。我们将在后面详细讨论每一个。

## 虚拟内存管理系统的快照

让我们假设两个过程，P1 和 P2，各包含 4 页。每个页面大小为 1 KB。主存储器包含 8 个各 1 KB 的帧。操作系统位于前两个分区中。在第三个分区中，存储了 P1 的 1 <sup>st</sup> 页，其他帧也显示为用主存储器中不同的进程页填充。

这两个页面的页面表都是 1 KB 大小，因此它们可以各放在一个框架中。这两个过程的页面表包含各种信息，这些信息也显示在图像中。

中央处理器包含一个寄存器，其中包含页表的基址，在 P1 是 5，在 P2 是 7。当访问实际对应的条目时，这个页表基址将被添加到逻辑地址的页码中。

![OS Virtual Memory](img/cfd1136fb0a54de1027c570ee13b6dc2.png)

### 虚拟内存的优势

1.  多道程序设计的程度将会提高。
2.  用户可以用更少的内存运行大型应用程序。
3.  没有必要购买更多内存 ram。

### 虚拟内存的缺点

1.  系统变得更慢，因为交换需要时间。
2.  在应用程序之间切换需要更多时间。
3.  用户将有更少的硬盘空间供其使用。