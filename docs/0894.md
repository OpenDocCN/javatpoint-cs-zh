# 内部与外部碎片化

> 原文:[https://www . javatpoint . com/internal-vs-external-分片](https://www.javatpoint.com/internal-vs-external-fragmentation)

## 什么是碎片化？

碎片化是一种数据存储过程，其中内存空间未得到充分利用，降低了能力或效率，有时两者兼而有之碎片的确切含义取决于运行中的特定存储空间分配方案和特定的碎片类型。在某些情况下，碎片会增加“未使用”的存储容量，这一概念也适用于在这种情况下产生的不可用空间。用于保存数据集(例如文件格式)的内存与其他系统(例如 FAT 文件系统)相似，无论碎片数量如何(从空到极端)。

有三种不同的碎片类型:内部碎片、外部碎片和数据碎片，它们可以同时存在，也可以组合存在。相对于增强、低效率或可用性，碎片化经常被认可。对于其他工具，如处理器，类似的事情也会发生。

## 碎片化的基本概念

当一个计算机程序需要从操作系统(OS) 中获取存储碎片时，这些元素被分块分配。当软件程序的一大块完成时，它可以被释放回系统，使它准备好以后再次被转移到下一个或类似的程序。软件在块的大小和保存时间上有所不同。一个计算机程序在其整个生命周期中可以要求和释放几个存储块。

系统启动时，未使用的内存区域很大且连续。随着时间的推移和利用率的提高，大的连续扇区被分割成更小的区域。最终，对系统来说，访问大的连续存储块会变得很困难。

![Internal vs. External Fragmentation](../Images/594b5c3d98780e2e63f0038f64f20dcf.png)

## 内部碎片

大多数内存空间的保留量通常超过了遵守存储空间限制的要求。例如，内存只能以块的形式(4 的倍数)提供给系统，结果，如果一个程序可能需要 29 个字节，它将得到 32 个字节的联合。当这种情况发生时，多余的储存就会被浪费掉。在这种情况下，无用的空间是在指定的区域内找到的。这种被称为固定段的结构会与过多的内存作斗争——任何进程都会消耗大量内存，不管这些内存有多小。内部碎片就是所谓的垃圾。与许多其他形式的碎片不同，恢复内部碎片是不可能的，通常，消除碎片的唯一方法是采用新的设计。

例如，在动态存储分配中，存储库通过将空间开销扩展到更大数量的元素来显著减少内部碎片。

![Internal vs. External Fragmentation](../Images/3786fcaf54ceb9b131551f5c684b7078.png)

上图展示了内部碎片，因为内部碎片被认为是分配的存储空间和所需空间或内存之间的区别。

## 外部碎片

当使用过的存储被分成更小的批次并被分配的内存空间打断时，就会发生外部碎片。当许多存储分配方法不能有效地调度系统使用的内存时，这是它们的一个弱点。结果是，尽管有未使用的存储可用，但它基本上是不可访问的，因为它被单独分割成了太有限的片段，无法满足软件的要求。“外部”一词源于这样一个事实，即不可访问的空间存储在指定区域之外。

例如，考虑一个场景，其中系统分配三个连续的内存块，然后释放中间的块。内存分配器可以将这种未使用的存储分配用于将来的分配。幸运的是，如果要保留的存储空间比这个可用区域更大，它将不会使用这个组件。

在数据文件中，当几个不同大小的文件被形成、调整大小和丢弃时，通常会存在外部碎片。如果将一个分解成几个小块的文档删除，效果会更差，因为这样会保留同样小的可用空间部分。

![Internal vs. External Fragmentation](../Images/988a72f6ea757fe367f708b9195b2cfd.png)

您可以在上面提到的图中看到，有足够的内存空间(55 KB)来执行进程-07(强制 50 KB)，但是存储(片段)不相邻。这里，要使用空闲的空间来运行一个过程，可以使用压缩、分页或分段策略。

## 内部碎片与外部碎片

![Internal vs. External Fragmentation](../Images/ff33f6a30d712ad638a62894bdadd1b4.png)

下面以表格的形式讨论内部和外部碎片之间的区别。

| -你好。不，不。 | 内部碎片 | 外部碎片 |
| 1. | 指定用于固定大小存储的内部碎片处理的帧平方度量。 | 可变大小的内存帧是在外部碎片期间指定给进程的平方度量。 |
| 2. | 当系统或过程大于存储时，会发生内部碎片。 | 每当系统或程序退出时，就会出现外部碎片。 |
| 3. | 内部碎片方法是具有完美匹配的框架。 | 压缩、分页和区分是外部碎片的替代方案。 |
| 4. | 每当存储被分割成固定长度的片段时，就会发生内部碎片。 | 每当根据进程长度将存储拆分为不同大小的段时，就会发生外部碎片。 |
| 5. | 分配的内存和所需的存储或内存之间的区别被认为是内部碎片。 | 在不连续的存储块之间创建的空白空间太小，新系统无法运行，被认为是外部碎片。 |

* * *